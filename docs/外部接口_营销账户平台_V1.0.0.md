
#1目的

该文档是营销账户平台对外开放接口文档，用于外围应用系统开发基于营销账户平台能力的业务逻辑。


#2接口
##2.1用户AUTH系列接口
###2.1.1 获取短信验证码接口

外围应用系统（下面简称：APP）可以使用该接口向指定的手机号码发送短信验证码。

1）请求说明

http请求方式: post

    http://IP:PORT/gw/userAuth/get_smscode


POST数据格式：JSON

    {"app":{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
    "mobileNum":"13912345678"}  

参数|必须|说明
-----|----|-----
appId|是|营销账户平台统一分配的appId
timeStamp|是|时间戳
nonce|是|随机数
signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,nonce,timeStamp))
mobileNum|是|登录的手机号码


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"已经发送短信验证码"}

错误时的JSON数据包示例：

    {"errcode":4110,"errmsg":"发送短信验证码失败，其它原因"}

###2.1.2用户登录接口
APP可以使用该接口完成用户登录验证，并获得用户token。


1）请求说明

前置条件：必须先执行获取短信验证码接口

http请求方式: post

    http://IP:PORT/gw/userAuth/login


POST数据格式：JSON

    {"app":{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
    "login":{"mobileNum":"13912345678","smsCode":"4567"}}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
timeStamp|是|时间戳
nonce|是|随机数
signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,nonce,timeStamp))
mobileNum|是|登录的手机号码
smsCode|是|通过短信获取到的验证码

2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"用户登录成功","token":"qpoiwreq99eekkeuurqwerq23ewrm","expireIn":-1}

错误时的JSON数据包示例：

    {"errcode":4120,"errmsg":"用户登录失败，其它错误"}

参数|是否必须|说明
---|---|---
token|否|当登录验证通过后，营销账户平台为该应用的用户分配唯一的token
expireIn|否|有效期限，单位秒。如果等于-1，表示该token永久有效，除非重新登录



###2.1.3 获取账户验证码接口

外围应用系统可以使用该接口向指定的用户发送短信形式的账户验证码，用于该账户的转账、提现、支付等操作，以及忘记支付密码操作。

1）请求说明

http请求方式: post

    http://IP:PORT/gw/userAuth/get_accountcode


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet","timeStamp":"TIMESTAMP","nonce":"NONCE","signature":"SIGNATURE"
        },
        "mobileNum":"13912345678"
    }  

参数|必须|说明
-----|----|-----
appId|是|营销账户平台统一分配的appId
timeStamp|是|时间戳
nonce|是|随机数
signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,nonce,timeStamp))
mobileNum|是|登录的手机号码


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"已经发送账户验证码"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"发送账户验证码失败，其它原因"}



###2.1.4 设置账户支付密码接口

外围应用系统可以使用该接口向重新设置账户支付密码，设置账户支付密码要求必须要输入账户验证码作为校验。

1）请求说明

http请求方式: post

    http://IP:PORT/gw/userAuth/set_paymentcode


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet","timeStamp":"TIMESTAMP","nonce":"NONCE","signature":"SIGNATURE"
        },
        "mobileNum":"13912345678","accountCode":"345678","paymentCodeMD5":"qwer1234567"
    }  

参数|必须|说明
-----|----|-----
appId|是|营销账户平台统一分配的appId
timeStamp|是|时间戳
nonce|是|随机数
signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,nonce,timeStamp))
mobileNum|是|用户手机号码，即用户名
accountCode|是|账户验证码
paymentCodeMD5|是|交易密码，要求存入为支付密码的MD5值


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"已经发送账户验证码"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"发送账户验证码失败，其它原因"}



##2.2现金账户系列接口

###2.2.1查询交易订单记录接口
外围应用系统调用该接口查询用户在现金账户的交易订单记录。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/cashAccount/queryOrderListByUser

POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
        "query":
            {"mobileNum":"13912345678","startDate":"2015-01-01","endDate":"2015-01-02" ,"pageSize":10,"pageIndex":1}
    }  


参数|必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
pageSize|是|页面需要的记录条数，最大500条
pageIndex|是|页面索引，从1开始
startDate|是|开始日期，该日期的00:00:00开始
endDate|是|结束日期，该日期的24:00:00结束


2）返回说明

正常时的返回JSON数据包示例：

    {"pageSize":10,"pageIndex":1,"total": 1000,
    "list":[
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"现金账户/转账（到投资账户）",
            "sum":500000,
            "flowDirection":"转出",
            "balance":400000,
            "peerAccountId":"1111222233334444",
            "peerAccountUnit":"营销账户平台",
            "peerAccountType":"IA#",
            "type":"转账",
            "remark":"从投资账户转账5000元到现金账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",
            "productName":"有油贷5000元套餐"
        }
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"投资账户/转账（到现金账户）",
            "sum":500000,
            "flowDirection":"转出",
            "balance":400000,
            "peerAccountId":"1111222233334444",
            "peerAccountUnit":"营销账户平台",
            "peerAccountType":"IA#",
            "type":"转账",
            "remark":"从投资账户转账5000元到现金账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",   
            "productName":"有油贷5000元套餐"     
        }
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，
            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"投资账户/转账（到现金账户）",
            "sum":500000,
            "flowDirection":"转出",
            "balance":400000,
            "peerAccountId":"1111222233334444",
            "peerAccountUnit":"营销账户平台",
            "peerAccountType":"IA#",
            "type":"转账",
            "remark":"从投资账户转账5000元到现金账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",     
            "productName":"有油贷5000元套餐"   
        }
    ]}


错误时的JSON数据包示例：

    {"errcode":22100,"errmsg":"查询交易订单记录失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|订单流水号
appId|是|APPID
appName|是|APP名称
method|是|操作标识
methodName|是|操作名称
sum|是|标的金额
flowDirection|是|流向，IN#-转入，OUT-转出，对外输出时直接输出“转入”或者“转出”
balance|是|当前账户结存
peerAccountId|是|对方账户ID,可以为空
peerAccountUnit|是|对方账户发卡单位，可以为空
peerAccountType|是|对方账户类型，IA#-投资账户，CA#现金账户，TA#-第三方账户/其他账户
type|是|类型，ZZ#-转账，FK#-付款，TOB-投标，FEB-废标， FB#-付本，SX#-收息，SB#-收本，TX#-提现，CZ#-充值，CZH-冲正
remark|是|备注
appOrderId|是|返回app自定义订单号，外围应用系统可以通过这个与自己的业务关联
productName|是|订单中关联的产品名称
insertTime|是|创建时间





###2.2.3转账（到投资账户）接口
外围应用系统可以调用该接口，将用户资金从现金账户转到投资账户。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/cashAccount/transfer_to_ia


POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},  
        "order":
            {"mobileNum":"13912345678", "sum":500000,"remark":"从现金账户转账5000元到投资账户", "appOrderId":"AO201412122344888444","accountCode":"231435","paymentCodeMD5":"w344dioeorreeoocWRT"},
        "tsig":
            {"orderMD5":"ORDERMD5","signature":"SIGNATURE", "timeStamp":"TIMESTAMP","nonce":"NONCE"}
    }  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
accountCode|否|账户验证码
paymentCodeMD5|否|交易密码
sum|是|金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,remark,appOrderId,sum,accountCode,paymentCodeMD5))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从现金账户转账到投资账户成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"从现金账户转账到投资账户失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号

##2.3投资账户系列接口
###2.3.1查询余额订单记录接口
外围应用系统调用该接口查询用户在投资账户的余额相关的交易订单记录。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/cashAccount/queryRemainingOrderListByUser

POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
        "query":
            {"mobileNum":"13912345678","startTime":"2015-01-01 00:00:00","endTime":"2015-01-02 24:00:00" ,"pageSize":10,"pageIndex":1}
    }  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
pageSize|是|页面需要的记录条数，最大500条
pageIndex|是|页面索引，从1开始
startDate|是|开始日期，该日期的00:00:00开始
endDate|是|结束日期，该日期的24:00:00结束


2）返回说明

正常时的返回JSON数据包示例：

    {"pageSize":10,"pageIndex":1,"total": 1000,
    "list":[
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"现金账户/转账（到投资账户）",
            "sum":500000,
            "flowDirection":"转出",
            "balance":400000,
            "peerAccountId":"1111222233334444",
            "peerAccountUnit":"营销账户平台",
            "peerAccountType":"IA#",
            "type":"转账"
            "remark":"从现金账户转账5000元到投资账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",
            "productName":""
        }
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"现金账户/转账（到投资账户）",
            "sum":500000,
            "flowDirection":"转出",
            "balance":400000,
            "peerAccountId":"1111222233334444",
            "peerAccountUnit":"营销账户平台",
            "peerAccountType":"IA#",
            "type":"转账"
            "remark":"从现金账户转账5000元到投资账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",   
            "productName":""     
        }
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，
            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"现金账户/转账（到投资账户）",
            "sum":500000,
            "flowDirection":"转出",
            "balance":400000,
            "peerAccountId":"1111222233334444",
            "peerAccountUnit":"营销账户平台",
            "peerAccountType":"IA#",
            "type":"转账"
            "remark":"从现金账户转账5000元到投资账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",     
            "productName":""   
        }
    ]}


错误时的JSON数据包示例：

    {"errcode":22100,"errmsg":"查询投资账户余额相关的交易订单记录失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|订单流水号
appId|是|APPID
appName|是|APP名称
method|是|操作标识
methodName|是|操作名称
sum|是|标的金额
remark|是|备注
flowDirection|是|流向，IN#-转入，OUT-转出，对外输出时直接输出“转入”或者“转出”
balance|是|当前账户结存
peerAccountId|是|对方账户ID,可以为空
peerAccountUnit|是|对方账户发卡单位，可以为空
peerAccountType|是|对方账户类型，IA#-投资账户，CA#现金账户，TA#-第三方账户/其他账户
type|是|类型，ZZ#-转账，FK#-付款，TOB-投标，FEB-废标， FB#-付本，SX#-收息，SB#-收本，TX#-提现，CZ#-充值，CZH-冲正
appOrderId|是|返回app自定义订单号，外围应用系统可以通过这个与自己的业务关联
productName|是|订单中关联的产品名称
insertTime|是|创建时间

###2.3.2查询标的交易记录接口
外围应用系统调用该接口查询用户在投资账户的标的相关的交易订单记录。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/cashAccount/queryObjectOrderListByUser

POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
        "query":
            {"mobileNum":"13912345678","startTime":"2015-01-01 00:00:00","endTime":"2015-01-02 24:00:00" ,"pageSize":10,"pageIndex":1}
    }  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
pageSize|是|页面需要的记录条数，最大500条
pageIndex|是|页面索引，从1开始
startDate|是|开始日期，该日期的00:00:00开始
endDate|是|结束日期，该日期的24:00:00结束


2）返回说明

正常时的返回JSON数据包示例：

    {"pageSize":10,"pageIndex":1,"total": 1000,
    "list":[
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"现金账户/转账（到投资账户）",
            "sum":500000,
            "remark":"从现金账户转账5000元到投资账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",
            "productName":"5000元标的"
        }
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"现金账户/转账（到投资账户）",
            "sum":500000,
            "remark":"从现金账户转账5000元到投资账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",   
            "productName":"5000元标的"     
        }
        {
            "orderId":"123434590003333444",
            "appId":"youyoudai",
            "appName":"有油贷网站"，
            "method":"/investmentAccount/transfer_to_cashAccount",
            "methodName":"现金账户/转账（到投资账户）",
            "sum":500000,
            "remark":"从现金账户转账5000元到投资账户",
            "status":"正常",
            "insertTime":"2015-01-01 12:12:12",
            "appOrderId":"223223232323233",     
            "productName":"5000元标的"   
        }
    ]}


错误时的JSON数据包示例：

    {"errcode":22100,"errmsg":"查询投资账户余额相关的交易订单记录失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|订单流水号
appId|是|APPID
appName|是|APP名称
method|是|操作标识
methodName|是|操作名称
sum|是|标的金额
remark|是|备注
appOrderId|是|返回app自定义订单号，外围应用系统可以通过这个与自己的业务关联
productName|是|订单中关联的产品名称
insertTime|是|创建时间

###2.3.3转账（到银行卡）接口
外围应用系统先调用该接口从投资账户扣减要转出的金额，然后调用支付平台的转账接口，将该金额转入到用户指定的银行卡。当接口返回失败时，外围应用系统不能调用支付平台的转账接口。如果调用支付平台的转账接口失败时，外围应用系统应再调用“转出（到银行卡）冲正接口”将原来的订单撤销。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/investmentAccount/transfer_to_bankCard


POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},  
		"order":
			{"mobileNum":"13912345678", "sum":500000,"remark":"从投资账户转账5000元到银行卡（卡号6211 2345 5678 1234）", "appOrderId":"AO201412122344888444","accountCode":"231435","paymentCodeMD5":"w344dioeorreeoocWRT","peerAccountId":"6211 2345 5678 1234","peerAccountUnit":"建设银行"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE", "timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
accountCode|否|账户验证码
paymentCodeMD5|否|交易密码
sum|是|金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,remark,appOrderId,sum,accountCode,paymentCodeMD5,peerAccountId,peerAccountUnit))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数
peerAccountId|否|对方交易账号，比如银行卡号
peerAccountUnit|否|对方账号发卡单位，比如建设银行


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从投资账户转账到银行卡成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":4330,"errmsg":"从投资账户转账到银行卡失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号

###2.3.4转账（到现金账户）接口
外围应用系统将投资账户中的可用金额转出到现金账户，调用该接口完成。

1）请求说明


http请求方式: post


    http://IP:PORT/gw/investmentAccount/transfer_to_cashAccount

POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},  
		"order":
			{"mobileNum":"13912345678","sum":500000,"remark":"从投资账户转账5000元到现金账户", "appOrderId":"AO201412122344888444", "accountCode":"231435","paymentCodeMD5":"w344dioeorreeoocWRT"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE", "timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
accountCode|否|账户验证码
paymentCodeMD5|否|交易密码
sum|是|金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,remark,appOrderId,sum,accountCode,paymentCodeMD5))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从投资账户转账到现金账户成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":4340,"errmsg":"从投资账户转账到现金账户失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号

###2.3.5支付有油贷产品接口
当用户在外围应用系统（APP）竞标有油贷标的后，如果用户中标，外围应用系统自动调用该接口对冻结的金额转为标的金额，相当于付本。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/investmentAccount/pay_yyd

POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
		"order":
			{"mobileNum":"13912345678", "orderId":"ud1234567890", "appOrderId":"AO201412122344888444"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
orderId|是|需要支付的订单号
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,orderId,remark,appOrderId))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从投资账户支付标的成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"从投资账户支付标的失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号


###2.3.6收本（返本）接口
当标的投资周期结束后，外围应用系统调用该接口完成返本。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/investmentAccount/payback_capital

POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
		"order":
			{"mobileNum":"13912345678","sum":500000,"productName":"有油贷5000元产品返本","remark":"有油贷5000元产品返本","appOrderId":"1234567890"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
productName|是|产品名称
sum|是|金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,productName,remark,appOrderId,sum))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"投资账户返本成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":4370,"errmsg":"投资账户返本失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号


###2.3.7收息（返息）接口
当标的产生利息后，外围应用系统调用该接口完成返息。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/investmentAccount/payback_interest

POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
		"order":
			{"mobileNum":"13912345678","sum":500000,"productName":"有油贷5000元产品返息","remark":"有油贷5000元产品返息", "appOrderid":"123456789"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
productName|是|产品名称
sum|是|金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,productName,remark,appOrderId,sum))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"投资账户返息成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":4380,"errmsg":"投资账户返息失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号

###2.3.8转账（到银行卡）冲正接口

当外围应用系统调用支付平台转账接口失败后，需要调用该接口，对原先转出订单进行冲正。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/investmentAccount/transfer_to_bankCard_undo


POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},  
		"order":
			{"mobileNum":"13912345678", "orderId":"UD20141212123023WEAER2233","remark":"从投资账户转账5000元到银行卡（卡号6211 2345 5678 1234）冲正", "appOrderId":"AO201412122344888444"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE", "timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
orderId|是|需要冲正的订单号
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值得字典顺序排列组合成字符串(mobileNum,remark,appOrderId,orderId))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从投资账户转账到银行卡冲正成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":2280,"errmsg":"从投资账户转账到银行卡失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号


###2.3.9冻结接口
当用户在外围应用系统（APP）竞标有油贷标的后，外围应用系统将会冻结用户投资账户的此部分的可用金额。当开标后，如果不中标，系统会自动调用解冻接口解冻；如果中标，系统会自动调用支付接口对冻结的金额转为标的金额。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/investmentAccount/freeze_yyd

POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
        "order":
            {"mobileNum":"13912345678","sum":500000,"productName":"有油贷5000元产品","remark":"在有油贷网站够爱5000元有油贷产品", "appOrderId":"AO201412122344888444", "accountCode":"123456", "paymentCodeMD5":"123werq123wer"},
        "tsig":
            {"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
    }  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
productName|是|产品名称
sum|是|标的金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,productName,remark,appOrderId,sum, accountCode, paymentCodeMD5))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从投资账户冻结标的资金成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"从投资账户冻结标的资金失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号



###2.3.10解冻接口
当用户在外围应用系统（APP）竞标有油贷标的后，外围应用系统将会冻结用户投资账户的此部分的可用金额。当开标后，如果不中标，系统会自动调用解冻接口解冻；如果中标，系统会自动调用支付接口对冻结的金额转为标的金额。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/investmentAccount/unfreeze_yyd

POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
        "order":
            {"mobileNum":"13912345678", "orderId":"ud1234567890","remark":"在有油贷网站解冻5000元有油贷产品", "appOrderId":"AO201412122344888444"},
        "tsig":
            {"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
    }  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
orderId|是|要解冻的订单号
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,orderId,remark,appOrderId))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数


2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从投资账户解冻标的资金成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"从投资账户解冻标的资金失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号


##2.4银行卡系列接口
###2.4.1转账（到投资账户）接口
当用户在外围应用系统（APP）完成银行卡转账后，调用该接口完成营销账户处理。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/bankCard/transfer_to_investmentAccount

POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
		"order":
			{"mobileNum":"13912345678","sum":500000,"remark":"从银行卡转账5000元到投资账户", "appOrderId":"AO201412122344888444", "peerAccountId":"1234123412341234", "peerAccountUnit":"招商银行"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
sum|是|转账金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
peerAccountId|否|对方交易账号，比如银行卡号
peerAccountUnit|否|对方发卡单位，比如招商银行
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,remark,appOrderId,sum,peerAccountId,peerAccountUnit))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数



2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从银行卡转账到投资账户成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":4360,"errmsg":"从银行卡转账到投资账户失败，其它错误"}

参数|必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号

###2.4.2转账（到现金账户）接口
当用户在外围应用系统（APP）完成银行卡转账后，调用该接口完成营销账户处理。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/bankCard/transfer_to_cashAccount

POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
        "order":
            {"mobileNum":"13912345678","sum":500000,"remark":"从银行卡转账5000元到现金账户", "appOrderId":"AO201412122344888444",  "peerAccountId":"1234123412341234", "peerAccountUnit":"招商银行"},
        "tsig":
            {"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
    }  


参数|必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
sum|是|转账金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
peerAccountId|否|对方交易账号，比如银行卡号
peerAccountUnit|否|对方发卡单位，比如招商银行
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,remark,appOrderId,sum,peerAccountId, peerAccountUnit))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数



2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从银行卡转账到现金账户成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":4360,"errmsg":"从银行卡转账到现金账户失败，其它错误"}

参数|必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号


##2.5汇通卡系列接口
###2.5.1转账（到现金账户）接口
外围应用系统先从汇通卡系统完成金额扣减，然后调用该接口，将汇通卡金额转入到现金账户，用于其他消费。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/huitongCard/transfer_to_cashAccount


POST数据格式：JSON

    {
		"app":
			{"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
		"order":
			{"mobileNum":"13912345678","sum":500000,"remark":"从汇通卡转账5000元到现金账户（汇通卡号6211 2345 5678 1234）", "appOrderId":"AO201412122344888444",  "peerAccountId":"1234123412341234", "peerAccountUnit":"招商银行"},
		"tsig":
			{"orderMD5":"ORDERMD5","signature":"SIGNATURE","timeStamp":"TIMESTAMP","nonce":"NONCE"}
	}  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码
sum|是|金额
remark|是|备注
appOrderId|是|app自定义订单号，最大支持128个字符
peerAccountId|否|对方交易账号，比如银行卡号
peerAccountUnit|否|对方发卡单位，比如招商银行
orderMD5|是|MD5签名值，MD5(按值的字典顺序排列组合成字符串(mobileNum,remark,appOrderId,sum,peerAccountId,peerAccountUnit))
tsig.signature|是|私钥签名值，signature((按值的字典顺序排列组合成字符串(orderMD5,appId,tsig.timeStamp,tsig.nonce))
tsig.timeStamp|是|时间戳
tsig.nonce|是|随机数

2）返回说明

正常时的返回JSON数据包示例：

    {"errcode":0,"errmsg":"从汇通卡转账到现金账户成功","orderId":"qpoiwreq99eekkeuurqwerq23ewrm"}

错误时的JSON数据包示例：

    {"errcode":2510,"errmsg":"从汇通卡转账到现金账户失败，其它错误"}

参数|是否必须|说明
--|--|--
orderId|否|营销账户平台返回的成功订单流水号

##2.6我的系列接口
###2.6.1查看我的明细接口
外围应用系统调用该接口查询用户在营销账户平台上的资产、红包、积分等。

1）请求说明


http请求方式: post

    http://IP:PORT/gw/my/queryUserAccountList

POST数据格式：JSON

    {
        "app":
            {"appId":"zjhtwallet","timeStamp":"TIMESTAMP", "nonce":"NONCE","signature":"SIGNATURE"},
        "query":{
            "mobileNum":"13912345678"
        }
    }  


参数|是否必须|说明
----|----|-----
appId|是|营销账户平台统一分配的appId
app.timeStamp|是|时间戳
app.nonce|是|随机数
app.signature|是|签名值，MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
mobileNum|是|用户手机号码


2）返回说明

正常时的返回JSON数据包示例：

    {
        "cashAccount":{
            "accountId":"1234123412341234",
            "sum":500000
        },
        "inventmentAccount":{
            "accountId":"5678567856785678",
            "objectSum":7000000,
            "remainingSum":5800000,
            "frozenSum":60000
        }
    }

错误时的JSON数据包示例：

    {"errcode":26100,"errmsg":"查询我的明细失败，其它错误"}

参数|是否必须|说明
--|--|--
cashAccount.accountId|是|现金账户帐号
cashAccount.sum|是|现金账户余额
inventmentAccount.accountId|是|投资账户帐号
inventmentAccount.objectSum|是|标的总额
inventmentAccount.remainingSum|是|可用余额
investmentAccount.frozenSum|是|冻结金额


